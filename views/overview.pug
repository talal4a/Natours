extends base

block content
  main.main
    .card-container
      if tours && tours.length > 0
        each tour in tours
          .card
            .card__header
              .card__picture
                .card__picture-overlay &nbsp;
                if tour.imageCover
                  img.card__picture-img(
                    src=`/img/tours/${tour.imageCover}`,
                    alt=tour.name,
                    onerror="this.src='/img/tours/tour-1-cover.jpg'"
                  )
                else
                  img.card__picture-img(
                    src='/img/tours/tour-1-cover.jpg',
                    alt='Default tour image'
                  )
              h3.heading-tertirary
                span= tour.name || 'Unnamed Tour'

            .card__details
              h4.card__sub-heading #{tour.difficulty || 'Easy'} #{tour.duration || 1}-day tour
              p.card__text= tour.summary || 'No description available.'

              .card__data
                svg.card__icon
                  use(xlink:href='/img/icons.svg#icon-map-pin')
                span= (tour.startLocation && tour.startLocation.description) || 'Unknown location'

              .card__data
                svg.card__icon
                  use(xlink:href='/img/icons.svg#icon-calendar')
                - const opts = ({ month: 'long', year: 'numeric' })
                - const startDate = tour.startDates && tour.startDates[0] ? new Date(tour.startDates[0]).toLocaleString('default', opts) : 'Coming soon';
                span= startDate

              .card__data
                svg.card__icon
                  use(xlink:href='/img/icons.svg#icon-flag')
                span= ((tour.locations && tour.locations.length) || 0) + ' stops'

              .card__data
                svg.card__icon
                  use(xlink:href='/img/icons.svg#icon-user')
                span= (tour.maxGroupSize || 0) + ' people'

            .card__footer
              p
                span.card__footer-value $#{tour.price || 0}
                | 
                span.card__footer-text per person
              p.card__ratings
                span.card__footer-value= (tour.ratingAverage && tour.ratingAverage.toFixed(1)) || 'N/A'
                | 
                span.card__footer-text rating (#{(tour.ratingQuantity || 0)})
              a.btn.btn--green.btn--small(href=`/tour/${tour.slug || '#'}`) Details
      else
        h2.heading-secondary.ma-bt-lg No tours found. Please check back later!
